---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/4/12 17:40
---
local ToolTipSkinView = BaseClass("ToolTipSkinView",UIBaseView)
local base = UIBaseView
local this = ToolTipSkinView




local function OnClickCloseButton(self)
    self.ctrl.CloseSelf()
end


function this.OnCreate(self)
    base.OnCreate(self)
    self.title_text = self.rc:GetObject("TitleText"):GetComponent("Text")
    
    self.EventBg=self.rc:GetObject("EventBg")
    self.Confirm = self.rc:GetObject("Confirm")
    self.Skin = self.rc:GetObject("Skin"):GetComponent("Image")
    self.closeBut = self.rc:GetObject("CloseButton")
    self.type1 = self.rc:GetObject("Type1")
    self.type2 = self.rc:GetObject("Type2")
    self.type3 = self.rc:GetObject("Type3")
    self.Msg = self.rc:GetObject("Msg"):GetComponent("Text")
    self.Cancel = self.rc:GetObject("Cancel")
    
    self.R1=self.rc:GetObject("1")
   
    self.R2=self.rc:GetObject("2")
   
    self.R3=self.rc:GetObject("3")
    
    self.R4=self.rc:GetObject("4")
    
    
    self.Type3Imager = self.rc:GetObject("Type3").transform:Find("Image"):GetComponent("Image")
    self.Type3Msg = self.rc:GetObject("Type3").transform:Find("Msg"):GetComponent("Text")
    
   
    
    UIUtil.AddBtnEvent(self.closeBut,function()OnClickCloseButton(self) end)
    UIUtil.AddBtnEvent(self.EventBg,function()OnClickCloseButton(self) end)
end

function this.OnLangCreate(self)
    LangUtil.BindText(self.title_text).text=""
    LangUtil.BindText(self.Msg).text = ""
    LangUtil.BindText(self.R1.transform:Find("Text")).text = LangUtil.GetSysLang(416)
    LangUtil.BindText(self.R1.transform:Find("Value"),"Number").text = "0"
    LangUtil.BindText(self.R2.transform:Find("Text"))
    LangUtil.BindText(self.R2.transform:Find("Value"),"Number").text = "0"
    LangUtil.BindText(self.R3.transform:Find("Text")).text = LangUtil.GetSysLang(802)
    LangUtil.BindText(self.R3.transform:Find("Value"),"Number").text = "0"
    LangUtil.BindText(self.R4.transform:Find("Text")).text = ""
    LangUtil.BindText(self.R4.transform:Find("Tip")).text = ""
    LangUtil.BindText(self.Type3Msg).text = ""
end

function this.OnEnable(self)
    base.OnEnable(self)
    UIManager:GetInstance():OpenWindow(UIWindowNames.UIComTop)
    self.comTopView = UIManager:GetInstance():GetWindow(UIWindowNames.UIComTop).View
    self.comTopView:InitComTop(self, self:GetName())

    self:OnRefresh()
end

function this.OnRefresh(self)
    if self.model.data.type == 1 or self.model.data.type == 2 then
        self.title_text.text = self.model.data.title
        UIUtil.NewSetCardSprite(self.Skin,self.model.data.CharacterId,self.model.data.SkinId,CardPictureType.Middle)
        self.R3.transform:Find("Value"):GetComponent("Text").text = self.model.data.PaidStarStone
        self.R4.transform:Find("Text"):GetComponent("Text").text = string.gsub(LangUtil.GetSysLang(1094),"X","<color=#ffc03d>"..self.model.data.skinName.."</color>")
        local tip = self.R4.transform:Find("Tip")
        if self.model.data.hasVoice then
            tip.gameObject:SetActive(false)
        else
            tip.gameObject:SetActive(true)
            tip:GetComponent("Text").text = string.gsub(LangUtil.GetSysLang(3119),"X", self.model.data.skinName)
        end
    elseif self.model.data.type == 3 then
        self.type1.transform:Find("Msg"):GetComponent("Text").text = self.model.data.msg
    end
    
    self.type1:SetActive(self.model.data.type == 3)
    self.type2:SetActive(self.model.data.type == 1 or self.model.data.type == 2)
    self.type3:SetActive(false)
    -- LangUtil.BindText(self.Confirm.transform:Find("Text")).text = LangUtil.GetSysLang(370)
    -- LangUtil.BindText(self.Cancel.transform:Find("Text")).text = LangUtil.GetSysLang(371)
    UIUtil.AddBtnEvent(self.Confirm,function() self.model.data.Event() OnClickCloseButton(self) end)
    UIUtil.AddBtnEvent(self.Cancel,function() OnClickCloseButton(self) end)
end

function this.OnAddListener(self)
    base.OnAddListener(self)
end

function this.OnRemoveListener(self)
    base.OnRemoveListener(self)
end

function this.OnDisable(self)
    base.OnDisable(self)
    --UIManager:GetInstance():CloseWindow(UIWindowNames.UIComTop)
end

function this.OnDestroy(self)
    base.OnDestroy(self)
end

return this

