---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/4/15 9:54
---

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/4/15 9:54
---

local UIMainIntensView = BaseClass("UIMainIntensView",UIBaseView)
local base = UIBaseView
local this = UIMainIntensView

--主界面
local back_btn_path = "ReturnButton"
local format_btn_path = "FromIntoColunmsButton"
local card_intens_btn_path = "RoleButton"
local equip_intens_btn_path = "EquipButton"
local fight_soul_intens_btn_path = "AdamWarButton"
local battle_array_intens_btn_path = "BattleArrayButton"

function this.OnLangCreate(self)
  local root = self.langRc:GetObject("Content").transform
  local backText = self.langRc:GetObject("BackText").transform
  LangUtil.BindText(backText).text = LangUtil.GetSysLang(642)

  for i = 0,root.childCount -1  do
    local img = root:GetChild(i):GetComponent("Image")
    LangUtil.GetSpriteLang(44+i,function(sprite)
      img.sprite = sprite
    end)
  end

end


function this.OnCreate(self)
    base.OnCreate(self);
    
    self.cur_view = nil;
    local image = self.rc:GetObject("Image")
    self.back_btn = self.rc:GetObject(back_btn_path);
    self.format_btn = self.rc:GetObject(format_btn_path);
    self.card_intens_btn = self.rc:GetObject(card_intens_btn_path);
    self.equip_intens_btn = self.rc:GetObject(equip_intens_btn_path);
    self.fight_soul_intens_btn = self.rc:GetObject(fight_soul_intens_btn_path);
    self.battle_array_intens_btn =self.rc:GetObject(battle_array_intens_btn_path);
    self.king_btn = self.rc:GetObject("KingButton");
  

    UIUtil.AddBtnEvent(self.king_btn,function() UIUtil.ToolTipFourth(LangUtil.GetSysLang(579)) end)
    UIUtil.AddBtnEvent(self.card_intens_btn,function()
        self.face:Stop()
        self.ctrl:OpenCardVisitWindow() end)
    UIUtil.AddBtnEvent(self.equip_intens_btn,function()
        self.face:Stop()
        self.ctrl:OpenEquipVisitWindow() end)
    UIUtil.AddBtnEvent(self.fight_soul_intens_btn,function()
        self.face:Stop()
        self.ctrl:OpenFightSoulVisitWindow() end)
    UIUtil.AddBtnEvent(self.back_btn,function() self.ctrl:CloseSelf() end,"Back")
    UIUtil.AddBtnEvent(self.battle_array_intens_btn,function()
        self.face:Stop()
        self.ctrl:OpenBattleArrayWindow() end)
    UIUtil.AddBtnEvent(self.format_btn,function() self.ctrl:OpenFormatWindow() end)

    self.face = UILandlady.New(image, 1002, self.rc:GetObject("Lines"))
 end
 
 function this.OnEnable(self)
     base.OnEnable(self);
     self:OnRefresh();
     coroutine.start(function()
         self.face:CoPlay()
     end)
 end

 function this.OnRefresh(self)
     --OpenView(self,1);
     self.cur_view = 1;
 end
 
 function this.OnAddListener(self)
     base.OnAddListener(self);
 end

 function this.OnRemoveListener(self)
     base.OnRemoveListener(self);
 end

function this.OnViewTop(self)
    base.OnViewTop(self)
    UIManager:GetInstance():OpenWindow(UIWindowNames.UIComTop)
end

function this.OnDisViewTop(self)
    base.OnDisViewTop(self)
    UIManager:GetInstance():CloseWindow(UIWindowNames.UIComTop)
end

 function this.OnDisable(self)
     base.OnDisable(self);
     Game.Scene:GetComponent("SoundComponent"):MainStop()
     self.face:Disable()
 end

 function this.OnDestroy(self)
     base.OnDestroy(self);
 end
 
 return this
 
 
