---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/4/25 9:59
---

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/4/23 16:56
---

local UICardFaceView = BaseClass("UICardFaceView",UIBaseView);
local base = UIBaseView;
local this = UICardFaceView;


local function InitPanel(self,card)
    local z_card = Z_Card[card.TemplateId];
    UIPublic.InitItemIcon(self.icon_image, nil, GoodsKind.Card, card.TemplateId)

    UIPublic.InitRaryImage(self.rary_image,z_card,true)
    UIPublic.InitAttributeArea(self.attribute,card,true);

    for k ,v in pairs(self.star_image_tab) do
        v.color = Color.New(1,1,1);
    end
    for i = 1,#self.star_image_tab do
        if i <= card.Star then
            self.star_image_tab[i].color = Color.New(1,1,0);
        end
    end

end


function this.OnCreate(self)
    base.OnCreate(self);
    self.icon_image = self.rc:GetObject("Icon"):GetComponent("Image");
    self.rary_image = self.rc:GetObject("Rary"):GetComponent("Image");
    self.attribute = self.rc:GetObject("Attribute");
    self.star_area = self.rc:GetObject("StarArea");
    self.star_image_tab = {};
    for i = 0,self.star_area.transform.childCount - 1 do
        self.star_image_tab[i + 1] = self.star_area.transform:GetChild(i):GetComponent("Image");
    end
    EventTriggerListener.Get(self.gameObject).onLuaClick = self.ctrl.CloseSelf;
end

function this.OnEnable(self)
    base.OnEnable(self);
    self:OnRefresh();
end

function this.OnRefresh(self)
    InitPanel(self,self.model.card);
end

function this.OnAddListener(self)
    base.OnAddListener(self);
end


function this.OnRemoveListener(self)
    base.OnRemoveListener(self);
end


function this.OnDestroy(self)
    base.OnDestroy(self);
end

return this;