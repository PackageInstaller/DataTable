---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/7/2 10:20
---

local InfoLogic = {};
local this = InfoLogic;


local function InitNumerical(self,level)
    local transform = self.numerical
    local hpTxt = transform:Find("HP/Value"):GetComponent("Text")
    local atkTxt = transform:Find("ATK/Value"):GetComponent("Text")
    local speedTxt = transform:Find("SPEED/Value"):GetComponent("Text")
    local defTxt = transform:Find("DEF/Value"):GetComponent("Text")
    local mDefTxt = transform:Find("MDEF/Value"):GetComponent("Text")

    -- local hpValue = self.zCard.Hp
    -- local atkValue = self.zCard.Atk
    -- local speedValue = self.zCard.Speed
    -- local defValue = self.zCard.Def
    -- local index = (level == 1 and {1} or {2})[1]

    hpTxt.text = self.zCard.HpDesc --hpValue[index]
    atkTxt.text = self.zCard.ATKDesc--atkValue[index]
    speedTxt.text = self.zCard.SpeedDesc--speedValue[index]
    defTxt.text = self.zCard.DefDesc--defValue[index]
    mDefTxt.text = self.zCard.MDefDesc--mDefValue[index]

end

local function InitKind(self)
    local transform = self.kind
    local zCard = self.zCard

    local rareImg = transform:Find("Rare/Value").gameObject
    local formImg = transform:Find("From/Value"):GetComponent("Image")
    local kindImg = transform:Find("Kind/Value").gameObject
    local atkKindImg = transform:Find("AtkKind/Value").gameObject
    local mainPropImg = transform:Find("MainProp/Value").gameObject
    local subPropImg = transform:Find("SubProp/Value").gameObject

    UIPublic.InitRare(rareImg,zCard)
    UIUtil.SetSprite(formImg,AtlasConfig.CardFrom,zCard.Sphere..".png")
    UIPublic.InitAbiliType(kindImg,zCard)
    UIPublic.InitAtkDistance(atkKindImg,zCard)
    UIPublic.InitMainProp(mainPropImg,zCard)
    UIPublic.InitSubProp(subPropImg,zCard)

end

local function InitDesc(self)
    local transform = self.desc
    local descTxt = transform:Find("Value"):GetComponent("Text")
    descTxt.text = self.zCard.Archive
end

local function OnClickLevelButton(self,level)
    -- self.maxLvBtn.transform:Find("Active").gameObject:SetActive(level == 100)
    -- self.minLvBtn.transform:Find("Active").gameObject:SetActive(level == 1)
    InitNumerical(self,level)
end


function this.Init(self)
    OnClickLevelButton(self,1)
    InitKind(self)
    InitDesc(self)
end


function this.OnLangCreate(self,panel)
    local langRc = panel.transform:Find("LangControl"):GetComponent("ReferenceCollector")
    local desc = langRc:GetObject("Desc").transform
    -- local title2 = langRc:GetObject("Title2").transform
    -- local title1 = langRc:GetObject("Title1").transform
    local kind = langRc:GetObject("Kind").transform
    local numerical = langRc:GetObject("Numerical").transform


    LangUtil.BindText(desc)
    -- LangUtil.BindText(title1).text = LangUtil.GetSysLang(281)
    -- LangUtil.BindText(title2).text = LangUtil.GetSysLang(284)


    LangUtil.BindText(kind:Find("Rare/Text")).text = LangUtil.GetSysLang(166)
    LangUtil.BindText(kind:Find("From/Text")).text = LangUtil.GetSysLang(580)
    LangUtil.BindText(kind:Find("Kind/Text")).text = LangUtil.GetSysLang(168)
    LangUtil.BindText(kind:Find("AtkKind/Text")).text = LangUtil.GetSysLang(192)
    LangUtil.BindText(kind:Find("MainProp/Text")).text = LangUtil.GetSysLang(190)
    LangUtil.BindText(kind:Find("SubProp/Text")).text = LangUtil.GetSysLang(191)

    -- LangUtil.BindText(numerical:Find("HP")).text = LangUtil.GetSysLang(3036)
    -- LangUtil.BindText(numerical:Find("ATK")).text = LangUtil.GetSysLang(3038)
    -- LangUtil.BindText(numerical:Find("SPEED")).text = LangUtil.GetSysLang(3037)
    -- LangUtil.BindText(numerical:Find("DEF")).text = LangUtil.GetSysLang(3039)

    LangUtil.BindText(numerical:Find("HP/Value"),FontType.All_Number)
    LangUtil.BindText(numerical:Find("ATK/Value"),FontType.All_Number)
    LangUtil.BindText(numerical:Find("SPEED/Value"),FontType.All_Number)
    LangUtil.BindText(numerical:Find("DEF/Value"),FontType.All_Number)
    -- LangUtil.BindText(self.maxLvBtn.transform:Find("Text"),FontType.All_Number)
    -- LangUtil.BindText(self.minLvBtn.transform:Find("Text"),FontType.All_Number)
end

function this.OnCreate(self,panel)
    local rc = panel:GetComponent("ReferenceCollector")
    self.numerical = rc:GetObject("Numerical").transform
    self.kind = rc:GetObject("Kind").transform
    self.desc = rc:GetObject("Desc").transform
    self.label = rc:GetObject("Label")
    -- self.maxLvBtn = self.numerical:Find("MaxLv").gameObject
    -- self.minLvBtn = self.numerical:Find("MinLv").gameObject

    -- UIUtil.AddBtnEvent(self.maxLvBtn,function() OnClickLevelButton(self,100)  end)
    -- UIUtil.AddBtnEvent(self.minLvBtn,function() OnClickLevelButton(self,1)  end)
end


return InfoLogic;



