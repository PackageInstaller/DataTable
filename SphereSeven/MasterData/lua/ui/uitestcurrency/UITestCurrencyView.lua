---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/5/10 11:24
---

local UITestCurrencyView = BaseClass("UITestCurrencyView",UIBaseView);
local base = UIBaseView;
local this = UITestCurrencyView;


local function OnClickStarLightGem(self)
    self.title.text = "--当前选择:星光石"
    self.data.CurrencyTypeVal = 6
end

local function OnClickGoldButton(gameObject) --金币
    local self = gameObject:GetComponent("BindData"):Get("self");
    self.data.CurrencyTypeVal = 0;
    self.title.text = "--当前选择:金币";
end

local function OnClickStarSandButton(gameObject) --星砂
    local self = gameObject:GetComponent("BindData"):Get("self");
    self.data.CurrencyTypeVal = 3;
    self.title.text = "--当前选择:星砂";
end

local function OnClickPaidStoneButton(gameObject) --有偿星石
    local self = gameObject:GetComponent("BindData"):Get("self");
    self.data.CurrencyTypeVal = 1;
    self.title.text = "--当前选择:有偿星石";
end

local function OnClickFreeStoneButton(gameObject) --无偿星石
    local self = gameObject:GetComponent("BindData"):Get("self");
    self.data.CurrencyTypeVal = 2;
    self.title.text = "--当前选择:无偿星石";
end

local function OnClickMagicCrystalButton(gameObject) --魔晶
    local self = gameObject:GetComponent("BindData"):Get("self");
    self.data.CurrencyTypeVal = 4;
    self.title.text = "--当前选择:魔晶";
end

local function OnClickKingStarButton(gameObject) --星皇点
    local self = gameObject:GetComponent("BindData"):Get("self");
    self.data.CurrencyTypeVal = 5;
    self.title.text = "--当前选择:星皇点";
end

local function OnClickConfirmButton(gameObject)
    local self = gameObject:GetComponent("BindData"):Get("self");
    self.data.CurrencyCount = tonumber(self.inputField.text);
    if self.data.CurrencyTypeVal == nil then
        UIUtil.ToolTipFourth("--未选择货币类型");
        return;
    end
    if self.data.CurrencyCount <= 0 then
        UIUtil.ToolTipFourth("--数量不能小于或等于0");
        return;
    end
    self.ctrl:SendRequest(self.data);
end

function this.OnCreate(self)
    base.OnCreate(self);
    self.star_light_gem = self.rc:GetObject("StarLightGem")
    self.gold_btn = self.rc:GetObject("Gold");
    self.star_sand_btn = self.rc:GetObject("StarSand");
    self.paid_stone_btn = self.rc:GetObject("PaidStarStone");
    self.free_stone_btn = self.rc:GetObject("FreeStarStone");
    self.king_star_btn = self.rc:GetObject("KingStar");
    self.magic_crystal_btn = self.rc:GetObject("MagicCrystal");
    self.confirm_btn = self.rc:GetObject("ConfirmButton");
    self.back_btn = self.rc:GetObject("ReturnButton");
    self.inputField = self.rc:GetObject("InputField"):GetComponent("InputField");
    self.title = self.rc:GetObject("Title"):GetComponent("Text");
    
    UIUtil.GetButtonDataComponent(self.gold_btn):Add("self",self);
    UIUtil.GetButtonDataComponent(self.star_sand_btn):Add("self",self);
    UIUtil.GetButtonDataComponent(self.paid_stone_btn):Add("self",self);
    UIUtil.GetButtonDataComponent(self.free_stone_btn):Add("self",self);
    UIUtil.GetButtonDataComponent(self.king_star_btn):Add("self",self);
    UIUtil.GetButtonDataComponent(self.magic_crystal_btn):Add("self",self);
    UIUtil.GetButtonDataComponent(self.confirm_btn):Add("self",self);
    
    UIUtil.AddBtnEvent(self.star_light_gem,function() OnClickStarLightGem(self)  end)
    
    ButtonListener.Get(self.gold_btn).OnClickHandler = OnClickGoldButton;
    ButtonListener.Get(self.star_sand_btn).OnClickHandler = OnClickStarSandButton;
    ButtonListener.Get(self.paid_stone_btn).OnClickHandler = OnClickPaidStoneButton;
    ButtonListener.Get(self.free_stone_btn).OnClickHandler = OnClickFreeStoneButton;
    ButtonListener.Get(self.king_star_btn).OnClickHandler = OnClickKingStarButton;
    ButtonListener.Get(self.magic_crystal_btn).OnClickHandler = OnClickMagicCrystalButton;
    ButtonListener.Get(self.confirm_btn).OnClickHandler = OnClickConfirmButton;
    ButtonListener.Get(self.back_btn).OnClickHandler = self.ctrl.CloseSelf;

    UIUtil.AddBtnSound(self.gold_btn)
    UIUtil.AddBtnSound(self.star_sand_btn)
    UIUtil.AddBtnSound(self.paid_stone_btn)
    UIUtil.AddBtnSound(self.free_stone_btn)
    UIUtil.AddBtnSound(self.king_star_btn)
    UIUtil.AddBtnSound(self.magic_crystal_btn)
    UIUtil.AddBtnSound(self.confirm_btn)
    UIUtil.AddBtnSound(self.back_btn)
    
end

function this.OnEnable(self)
    base.OnEnable(self);
    self:OnRefresh();
end

function this.OnRefresh(self)
    self.data = {};
    self.title.text = "--未选择货币";
    self.inputField.text = "0";
end

function this.OnAddListener(self)
    base.OnAddListener(self);
end

function this.OnRemoveListener(self)
    base.OnRemoveListener(self);
end


function this.OnDestroy(self)
    base.OnDestroy(self);
end

return this;