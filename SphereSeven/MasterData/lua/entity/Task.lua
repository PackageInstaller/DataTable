---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/4/4 14:48
--- 队伍的占位和Card数据

---@class Task : Entity
---@field type number
---@field Id number
---@field Count number
---@field status number
---@field config table
---@field target number 
local Task = BaseClass("Task",Entity)
local base = Entity
local this = Task

function this:Awake(TaskInfo, config)
    base.Awake(self)
    self.type = TaskInfo.type
    self.Id = TaskInfo.id
    self.TemplateId = 0 -- 准备删除
    self.Count = TaskInfo.count
    self.IsReceive = TaskInfo.IsReceive -- 准备删除
    self.status = TaskInfo.status
    self.config = config
    self.target = tonumber(self.config.Params[#self.config.Params])

    self:UpdateHint()
end

function this:UpdateData(TaskInfo)
    self.type = TaskInfo.type or self.type
    self.Id = TaskInfo.id or self.Id
    self.status = TaskInfo.status or self.status
    self.Count = TaskInfo.count or self.Count

    self:UpdateHint()
end

function this:UpdateHint()
    ---@type HintComponent
    local hintComponent = Game.Scene:GetComponent("HintComponent")

    local hint
    if self.type == TaskType.TaskTypeGameEvent then
        hint = hintComponent.hints["TaskTypeGameEvent"]:GetChild(self.Id)
    elseif self.type == TaskType.TaskTypePass then
        hint = hintComponent.hints["TaskTypePass"]:GetChild(self.Id)
    else
        hint = hintComponent.Task:GetChild(self.type):GetChild(self.Id)
    end
    
    if self.status == TaskStatus.TaskStatusCompleted then
        hint:SetCount(1)
    else
        hint:SetCount(0)
    end
end

function this.Dispose(self)
    base.Dispose(self)
end


return this