---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by daiyi.
--- DateTime: 2019/7/18 14:16
--- 关羽
---
local FightSoul_30033 = BaseClass("FightSoul_30033",Skill)
local base = Skill

local function __init(self)
end

local function OnUnitSelfTurnStart(self)
    base.OnUnitSelfTurnStart(self)
    if not BattleUtil.IsPctProbHit(self.Params[1]) then
        return
    end

    local buffTypes = {
        BattleBuffType.AtkIncrease,
        BattleBuffType.DefIncrease,
        BattleBuffType.MagicDefIncrease,
        BattleBuffType.SpeedIncrease,
        BattleBuffType.CriIncrease,
        BattleBuffType.CriDamageIncrease,
        BattleBuffType.CriResistIncrease,
        BattleBuffType.Heal,
        BattleBuffType.ImmuneDeBuff,
    }
    local candidatteBuffTypes = {}
    for _, buffType in ipairs(buffTypes) do
        if not self.__sbc:HasBuffId(buffType) then
            table.insert(candidatteBuffTypes, buffType)
        end
    end
    if #candidatteBuffTypes == 0 then
        candidatteBuffTypes = buffTypes
    end
    local buffType = candidatteBuffTypes[math.random(1, #candidatteBuffTypes)]
    self.__sbc:CreateBuff(buffType, self.SkillId, self.SrcUnit, self.SrcUnit, 2)
end

FightSoul_30033.__init = __init
FightSoul_30033.OnUnitSelfTurnStart = OnUnitSelfTurnStart

return FightSoul_30033