---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by
--- DateTime: 2019/11/13 11:10
--- Boss buff
local Buff_6001 = BaseClass("Buff_6001",Buff)
local base = Buff

local function __init(self)
    local diff = Game.Scene:GetComponent("AgainstComponent"):GetCurLevelDiff()
    diff = diff or 1
    local atk, def, hp = 0, 0, 0
    if diff == 1 then
        atk = 20
        def = 10
        hp = 500
    elseif diff == 2 then
        atk = 30
        def = 20
        hp = 1000
    elseif diff == 3 then
        atk = 50
        def = 30
        hp = 2000
    elseif diff == 4 then
        atk = 80
        def = 50
        hp = 3000
    end
    self.atk = atk
    self.def = def
    self.hp = hp
end

local function OnRoundStart(self)
    self.is_acted = false
end

local function OnActEnd(self)
    if self.is_acted then
        return
    end
    local battle_component = Game.Scene:GetComponent("BattleComponent")
    if battle_component.CurActType ~= ActType.Speed then -- 不是竞速
        return
    end
    battle_component.TempSaveQueue:enqueue(self.TargetUnit)
    self.is_acted = true
end

local function OnOccur(self)
    base.OnOccur(self)
    self.__tcc:IncSpecialEffect(SpecialEffectType.ImmuneAllDeBuff2)
    self.__tcc:IncSpecialEffect(SpecialEffectType.ImmuneDemoralize)
    self.__tcc:IncSpecialEffect(SpecialEffectType.ImmuneDispel)
    self.__tcc:IncSpecialEffect(SpecialEffectType.ImmunePurify)
    self.__tcc:IncSpecialEffect(SpecialEffectType.ImmuneSecKill)
    self.__tcc:IncSpecialEffect(SpecialEffectType.ImmuneReflectDamage)

    self.__tnc:Inc(NumericType.AtkPct, self.atk)
    self.__tnc:Inc(NumericType.DefPct, self.def)
    self.__tnc:Inc(NumericType.MaxHpPct, self.hp)
end

local function OnRemoved(self)
    self.__tcc:DecSpecialEffect(SpecialEffectType.ImmuneAllDeBuff2)
    self.__tcc:DecSpecialEffect(SpecialEffectType.ImmuneDemoralize)
    self.__tcc:DecSpecialEffect(SpecialEffectType.ImmuneDispel)
    self.__tcc:DecSpecialEffect(SpecialEffectType.ImmunePurify)
    self.__tcc:DecSpecialEffect(SpecialEffectType.ImmuneSecKill)
    self.__tcc:DecSpecialEffect(SpecialEffectType.ImmuneReflectDamage)

    self.__tnc:Dec(NumericType.AtkPct, self.atk)
    self.__tnc:Dec(NumericType.DefPct, self.def)
    self.__tnc:Dec(NumericType.MaxHpPct, self.hp)
    base.OnRemoved(self)
end

Buff_6001.__init = __init
Buff_6001.OnRoundStart = OnRoundStart
Buff_6001.OnActEnd = OnActEnd
Buff_6001.OnOccur = OnOccur
Buff_6001.OnRemoved = OnRemoved

return Buff_6001