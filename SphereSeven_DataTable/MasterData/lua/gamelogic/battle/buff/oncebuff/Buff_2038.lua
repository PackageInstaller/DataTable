---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by daiyi.
--- DateTime: 2019/7/13 1:44
--- 无量
---免疫一次受到的所有伤害并恢复20%体力，但无法免疫负面效果。
local Buff_2038 = BaseClass("Buff_2038",Buff)
local base = Buff

local function OnOccur(self)
    base.OnOccur(self)
    self.__tcc:IncSpecialEffect(SpecialEffectType.ImmuneAllDamage)
end

local function OnRemoved(self)
    self.__tcc:DecSpecialEffect(SpecialEffectType.ImmuneAllDamage)
    base.OnRemoved(self)
end

local function AfterAllHurt(self)
    local tbc = self.TargetUnit:GetComponent("SsUnitBattleComponent")
    tbc:HealHp(math.modf(self.__tcc:GetHealHpBase()*0.2))
    OnRemoved(self)
end

Buff_2038.OnOccur = OnOccur
Buff_2038.OnRemoved = OnRemoved
Buff_2038.AfterAllHurt = AfterAllHurt

return Buff_2038