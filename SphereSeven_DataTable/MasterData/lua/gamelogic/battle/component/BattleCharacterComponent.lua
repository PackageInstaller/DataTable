---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by daiyi.
--- DateTime: 2019/4/12 18:22
---
local BattleCharacterComponent = BaseClass("BattleCharacterComponent", Component)
local base = Component

local criBaseValue = tonumber(Z_Misc["CHARACTER_BASE_CRI"].Value[1])
local CriDamageBaseValue = tonumber(Z_Misc["CHARACTER_BASE_CRIDAMAGE"].Value[1])

local function SetBaseAttr(self)
    if self.__entity.IsMonster then
        local zMonster = Z_Monster[self.__entity.Id]
        self.numeric_component:Set(NumericType.MaxHpBase, zMonster.Hp)
        self.numeric_component:Set(NumericType.AtkBase, zMonster.Atk)
        self.numeric_component:Set(NumericType.DefBase, zMonster.Def)
        self.numeric_component:Set(NumericType.MagicDefBase, zMonster.MagicDef)
        self.numeric_component:Set(NumericType.SpeedBase, zMonster.Speed)
        self.numeric_component:Set(NumericType.CriBase, zMonster.Cri)
        self.numeric_component:Set(NumericType.CriDamageBase, zMonster.CriDamage)
        self.numeric_component:Set(NumericType.EAccBase, zMonster.EAcc)
        self.numeric_component:Set(NumericType.ERistBase, zMonster.ERist)
    else
        local zCharacterGrowth = Z_CharacterGrowth[self.__entity.TemplateId][self.__entity.Level]
        self.numeric_component:Set(NumericType.MaxHpBase, zCharacterGrowth.Hp)
        self.numeric_component:Set(NumericType.AtkBase, zCharacterGrowth.Atk)
        self.numeric_component:Set(NumericType.DefBase, zCharacterGrowth.Def)
        self.numeric_component:Set(NumericType.MagicDefBase, zCharacterGrowth.MagicDef)
        self.numeric_component:Set(NumericType.SpeedBase, zCharacterGrowth.Speed)
        self.numeric_component:Set(NumericType.CriBase, criBaseValue)
        self.numeric_component:Set(NumericType.CriDamageBase, CriDamageBaseValue)
    end
end

local function Awake(self)
    base.Awake(self)
    self.numeric_component = self.__entity:GetComponent("NumericComponent")
    SetBaseAttr(self)
end

local function Dispose(self)
    base.Dispose(self)
end

BattleCharacterComponent.Awake = Awake
BattleCharacterComponent.Dispose = Dispose

return BattleCharacterComponent