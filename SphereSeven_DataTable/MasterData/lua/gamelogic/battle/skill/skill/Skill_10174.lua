---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/5/28 11:12
--- 神兵禁卫
---
local Skill_10174 = BaseClass("Skill_10174",Skill)
local base = Skill

local function __init(self)
    self.SharedIds = {}
end

local function OnBattleStart(self)
    base.OnBattleStart(self)
    self:OnPassiveSkillEnabled()
end


---当被动技能激活时
local function OnPassiveSkillEnabled(self)
    base.OnPassiveSkillEnabled(self)

    local friends = self:__get_friend_all()
    for _, unit in pairs(friends) do
        if unit ~= self.SrcUnit then
            local sharedId = unit:GetComponent("CharacterComponent"):AddDamageShare(self.SrcUnit, self.Params[1])
            self.SharedIds[unit.UID] = sharedId
        end
    end
end

---当被动技能失效时
local function OnPassiveSkillDisabled(self)
    base.OnPassiveSkillDisabled(self)

    local friends = self:__get_friend_all()
    for _, unit in pairs(friends) do
        if unit ~= self.SrcUnit then
            local sharedId = self.SharedIds[unit.UID]
            if sharedId then
                unit:GetComponent("CharacterComponent"):RemoveDamageShare(sharedId)
            end
        end
    end
end

Skill_10174.__init = __init
Skill_10174.OnBattleStart = OnBattleStart
Skill_10174.OnPassiveSkillEnabled = OnPassiveSkillEnabled
Skill_10174.OnPassiveSkillDisabled = OnPassiveSkillDisabled



return Skill_10174