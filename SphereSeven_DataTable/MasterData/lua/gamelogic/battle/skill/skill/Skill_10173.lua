---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/5/27 19:45
--- 意志的火花
---
local Skill_10173 = BaseClass("Skill_10173",Skill)

local function __init(self)
end

local function OnUseActiveSkill(self, targetUnit)
    local result = ActiveSkillResult.New()
    if targetUnit ~= self.SrcUnit then
        local scale1 = self.Params[1] / 100
        local maxHp = self.__snc:Get(NumericType.MaxHp)

        local scale2 = self.Params[2] / 100
        local hp = self.__snc:Get(NumericType.Hp)
        local lostHp = maxHp - hp
        local output = maxHp * scale1 + lostHp * scale2

        local damageNum = output / self.MultistageNum
        result.FeixiaoDamage = {
            Type = BattleDamageType.Real,
            Value = damageNum
        }
    else
        local shieldValue = self.__snc:Get(NumericType.MaxHp) * self.Params[4] / 100
        table.insert(result.Buffs, ActiveSkillBuff.New(BattleBuffType.UniversalShield, self.Params[3], nil, nil, nil, nil, {ShieldValue = shieldValue}))
    end
    return result
end

Skill_10173.__init = __init
Skill_10173.OnUseActiveSkill = OnUseActiveSkill

return Skill_10173