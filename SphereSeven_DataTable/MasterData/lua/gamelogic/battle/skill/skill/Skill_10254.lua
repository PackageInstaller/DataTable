---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/5/28 11:12
--- 妖狐幻影
---每回合开始时自身回避率＋10%，最多叠加50%",
-- 自身回避成功时恢复20%体力",
-- 敌方全体防御力、命中率-30%
local Skill_10254 = BaseClass("Skill_10254",Skill)
local base = Skill

local function __init(self)
    
end

local function OnUnitSelfTurnStart(self)
    local enemies = self:__get_enemy_all()

    local totalCount = 0
    for k, v in pairs(enemies) do
        totalCount = totalCount + v:GetComponent("BuffComponent"):BuffTypeCount(true)
    end

    if totalCount == 0 then
        return
    end
    local value = totalCount * self.Params[2] / 100 * self.__snc:Get(NumericType.Atk)

    local friends = self:__get_friend_all()
    local targetFriend = BattleUtil.GetExtremeAttrTarget(friends, NumericType.Hp, false)
    if targetFriend then
        targetFriend:GetComponent("BuffComponent"):CreateBuff(BattleBuffType.UniversalShield,self.SkillId,
            self.SrcUnit,targetFriend,self.Params[1], nil, nil, nil, nil, {ShieldValue = value})
    end
end

Skill_10254.__init = __init
Skill_10254.OnUnitSelfTurnStart = OnUnitSelfTurnStart

return Skill_10254