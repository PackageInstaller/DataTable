---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/5/28 11:12
--- 炽天使之炎
---"我方全体暴击伤害＋30%",
-- "每回合开始时自身获得【直觉】、【感应】效果",
-- "每回合开始时对全体敌人造成30%火属性伤害",

--亲密度100-- 我方全体对【麻痹】、【凋零】效果免疫

local Skill_10364 = BaseClass("Skill_10364",Skill)
local base = Skill

local function __init(self)
    self.Data.LeftTurn = 0
end

local function OnUnitSelfTurnStart(self)
    if self.Data.LeftTurn > 0 then
        self.Data.LeftTurn = self.Data.LeftTurn - 1
    end
end

local function OnHpChange(self)
    if self.Data.LeftTurn > 0 then
        return
    end
    if self.__snc:Get(NumericType.Hp) == 0 then
        self.__snc:Set(NumericType.Hp, 1)
        self.Data.Triggered = true
        self.__sbc:CreateBuff(BattleBuffType.Immortal, self.SkillId, self.SrcUnit, self.SrcUnit, self.Params[1])
        self.__sbc:CreateBuff(BattleBuffType.EResistIncrease, self.SkillId, self.SrcUnit, self.SrcUnit, self.Params[1])
        local skillComponent = self.SrcUnit:GetComponent("SkillComponent")
        skillComponent.ActiveSkills[skillComponent.Skill1Id]:SetCooldownTurn(0)
        skillComponent.ActiveSkills[skillComponent.Skill2Id]:SetCooldownTurn(0)
        self.Data.LeftTurn = self.Params[2]
    end
end

Skill_10364.__init = __init
Skill_10364.OnUnitSelfTurnStart = OnUnitSelfTurnStart
Skill_10364.OnHpChange = OnHpChange


return Skill_10364