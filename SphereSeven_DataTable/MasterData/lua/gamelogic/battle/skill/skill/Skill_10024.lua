---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by daiyi.
--- DateTime: 2019/5/11 13:46
--- 冰心剑意
--- 攻击【冻结】状态单位时，不会减少【冻结】的回合数。回合开始时有${param[1]}%的概率赋予随机前排敌方${param[2]}回合的【冻结】
---
local Skill_10024 = BaseClass("Skill_10024",Skill)
local base = Skill

local function __init(self)
end

local function BeforeHit(self, activeSkillResult, targetUnit)
    base.BeforeHit(self)
    if self.IsDisabled then
        return
    end

    local freeze = targetUnit:GetComponent("BuffComponent"):GetBuff(BattleBuffType.Freeze)
    if freeze ~= nil then
        freeze:PreventHurtReduce()
    end

end

local function OnUnitSelfTurnStart(self)
    base.OnUnitSelfTurnStart(self)

    if self.IsDisabled then
        return
    end

    if ss.IsRandHit(self.Params[1] / 100) then
        local targets = self:__get_enemy_front()
        local target = table.randget(targets)
        if target ~= nil then
            target:GetComponent("BuffComponent"):CreateBuff(BattleBuffType.Freeze, self.SkillId, self.SrcUnit, target, self.Params[2])
        end
    end
end

Skill_10024.__init = __init
Skill_10024.BeforeHit = BeforeHit
Skill_10024.OnUnitSelfTurnStart = OnUnitSelfTurnStart

return Skill_10024