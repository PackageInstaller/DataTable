---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/5/28 11:12
--- 神聖新星
--- 对一排敌人造成${Params[1]}%攻击力+自身${Params[2]}%最大生命值的物理伤害，有${Params[3]}%的概率赋予${Params[4]}回合的【沉默】

local Skill_10313 = BaseClass("Skill_10313", Skill)
local base = Skill

local function __init(self)
    self.MultistageNum = 3
end

local function OnUseActiveSkill(self, targetUnit)
    local result = ActiveSkillResult.New()
    if not BattleUtil.IsFriend(self.SrcUnit, targetUnit) then

        local atk = self.__snc:Get(NumericType.Atk)
        local maxHp = self.__snc:Get(NumericType.MaxHp)
        local damageNum = (atk * self.Params[1] / 100 + maxHp * self.Params[2] / 100) / self.MultistageNum
        result.FeixiaoDamage = {
            Type = BattleDamageType.Physical,
            Value = damageNum
        }

        Logger.BattleLog("--------muliple hit " .. self.MultistageNum)
    
        if ss.IsRandHit(self.Params[3] / 100) then
            table.insert(result.Buffs, ActiveSkillBuff.New(BattleBuffType.Silence, self.Params[4]))
        end
    
    end

    return result
end

Skill_10313.__init = __init
Skill_10313.OnUseActiveSkill = OnUseActiveSkill

return Skill_10313