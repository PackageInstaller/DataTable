---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by daiyi.
--- DateTime: 2019/4/22 16:52
--- 曹操
---
local FightSoul_30003 = BaseClass("FightSoul_30003",Skill)
local base = Skill

local function __init(self)
end

local function OnUnitSelfTurnStart(self)
    base.OnUnitSelfTurnStart(self)

    local value = BATTLE_NUM_MAX
    local friends = self:__get_friend_all()
    local targetUnit 
    for _, unit in pairs(friends) do
        local hp = unit:GetComponent("NumericComponent"):Get(NumericType.Hp)
        if hp < value then
            targetUnit = unit
            value = hp
        end
    end
    if targetUnit then
        local maxHp = targetUnit:GetComponent("NumericComponent"):Get(NumericType.MaxHp)
        local healHp = math.modf(maxHp * self.Params[1]/100 * BattleUtil.GetHealHpScale(self.SrcUnit, targetUnit))
        targetUnit:GetComponent("SsUnitBattleComponent"):HealHp(healHp)
    end    
end


FightSoul_30003.__init = __init
FightSoul_30003.OnUnitSelfTurnStart = OnUnitSelfTurnStart

return FightSoul_30003