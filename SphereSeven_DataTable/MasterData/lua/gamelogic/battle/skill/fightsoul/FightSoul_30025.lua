---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by daiyi.
--- DateTime: 2019/7/18 14:14
--- 玉藻前
---
local FightSoul_30025 = BaseClass("FightSoul_30025",Skill)
local base = Skill

local function __init(self)
    self.Data.Count = 0
end

local function OnActStart(self)
    base.OnActStart(self)

    if self.__bc.CurActSkill.ZSkill == nil then
        return
    end
    if self.__bc.CurActSkill.ZSkill.SkillType ~= BattleSkillType.Assist then
        return
    end
    self.Data.Count = self.Data.Count + 1
    
    if self.Data.Count < 2 then
        return
    end

    local friends = self:__get_friend_all()
    local targetUnit = BattleUtil.GetExtremeAttrTarget(friends, NumericType.Atk, true)
    if targetUnit then
        targetUnit:GetComponent("BattleUnitComponent"):ChangeActValue(self.Params[1])
        if BattleUtil.IsPctProbHit(self.Params[2]) then
            targetUnit:GetComponent("BuffComponent"):CreateBuff(10012, self.SkillId, self.SrcUnit, targetUnit, 1)
        end
    end

    self.Data.Count = 0
end

FightSoul_30025.__init = __init
FightSoul_30025.OnActStart = OnActStart

return FightSoul_30025