---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by daiyi.
--- DateTime: 2019/7/18 11:35
--- 彼得一世
---
local FightSoul_30017 = BaseClass("FightSoul_30017",Skill)
local base = Skill

local function __init(self)
    -- 同时只生效一个
    FightSoul_30017._CurUnitEffective = false
end

local function BeforeHitEvent(self, activeSkillResult, atkUnit, targetUnit)
    if self.__scc.IsDead then
        return
    end

    if FightSoul_30017._CurUnitEffective then
        return
    end

    if self.__bc.CurActSkill.ZSkill.EnemyRange == EnemyRange.All then
        activeSkillResult.ExtraFinalDamagePct = activeSkillResult.ExtraFinalDamagePct - self.Params[1]
        FightSoul_30017._CurUnitEffective = true
    end
end

local function OnDamageEvent(self, atkUnit, hurtUnit, activeSkillResult)
    if not FightSoul_30017._CurUnitEffective then
        return
    end

    FightSoul_30017._CurUnitEffective = false
end

FightSoul_30017.__init = __init
FightSoul_30017.BeforeHitEvent = BeforeHitEvent
FightSoul_30017.OnDamageEvent = OnDamageEvent

return FightSoul_30017