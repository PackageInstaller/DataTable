---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by daiyi.
--- DateTime: 2019/7/18 14:16
---
local FightSoul_40001 = BaseClass("FightSoul_40001",Skill)
local base = Skill

local function __init(self)
end

local function OnUnitSelfTurnEnd(self)
    base.OnUnitSelfTurnEnd(self)
    if not BattleUtil.IsPctProbHit(self.Params[1]) then
        return
    end
    local friendCount = table.count(self:__get_friend_all()) - 1
    if friendCount == 3 then
        self.__sbc:CreateBuff(BattleBuffType.DefIncrease, nil, self.SrcUnit, self.SrcUnit, 2)
    elseif friendCount == 2 then
        self.__sbc:CreateBuff(BattleBuffType.DefIncrease, nil, self.SrcUnit, self.SrcUnit, 2)
        self.__sbc:CreateBuff(BattleBuffType.AtkIncrease, nil, self.SrcUnit, self.SrcUnit, 2)
    elseif friendCount == 1 then
        self.__sbc:CreateBuff(BattleBuffType.DefIncrease, nil, self.SrcUnit, self.SrcUnit, 2)
        self.__sbc:CreateBuff(BattleBuffType.AtkIncrease, nil, self.SrcUnit, self.SrcUnit, 2)
        self.__sbc:CreateBuff(BattleBuffType.ImmuneDeBuff, nil, self.SrcUnit, self.SrcUnit, 2)
    elseif friendCount == 0 then
        self.__sbc:CreateBuff(BattleBuffType.DefIncrease, nil, self.SrcUnit, self.SrcUnit, 2)
        self.__sbc:CreateBuff(BattleBuffType.AtkIncrease, nil, self.SrcUnit, self.SrcUnit, 2)
        self.__sbc:CreateBuff(BattleBuffType.ImmuneDeBuff, nil, self.SrcUnit, self.SrcUnit, 2)
        self.__sbc:CreateBuff(BattleBuffType.CriDamageIncrease, nil, self.SrcUnit, self.SrcUnit, 2)
    end
end

FightSoul_40001.__init = __init
FightSoul_40001.OnUnitSelfTurnEnd = OnUnitSelfTurnEnd

return FightSoul_40001