---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/7/11 10:20
--- 倒计时器

local CountDown = BaseClass("CountDown")
local this = CountDown


function this.ActiveTimer(self)
    coroutine.start(function()
        coroutine.waitforframes(1)
        while(true) do
            coroutine.waitforseconds(1)
            if self.isStart == true then
                if self.sec == 0 then
                    if self.minute == 0 then
                        if self.hour == 0 then
                            if self.callBack ~= nil then  self.callBack() end
                            self.Delete(self)
                            return
                        else
                            self.hour = self.hour - 1
                            self.sec = 59
                            self.minute = 59
                        end
                    else
                        self.minute = self.minute - 1
                        self.sec = 59
                    end
                else
                    self.sec = self.sec - 1
                end
            end
        end
    end)
end

function this.StartTimer(self)
    self.isStart = true;
end

function this.StopTimer(self)
    self.isStart = false;
end

function this.GetTimeDetail(self)
    return self.hour,self.minute,self.sec;
end


function this.__init(self,hour,minute,sec,callBack)
    self.hour = hour;
    self.minute = minute;
    self.sec = sec;
    self.isStart = true;
    self.callBack = callBack;
    self:ActiveTimer();
end


return this;