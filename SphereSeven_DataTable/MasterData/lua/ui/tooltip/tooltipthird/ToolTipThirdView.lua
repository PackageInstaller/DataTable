---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/4/12 17:40
---
local ToolTipThirdView = BaseClass("ToolTipThirdView",UIBaseView)
local base = UIBaseView
local this = ToolTipThirdView

local msg_text_path = "MsgText"
local title_text_path  = "TitleText"



function this.OnCreate(self)
    base.OnCreate(self);
    
    self.msg_text = self.rc:GetObject(msg_text_path):GetComponent("Text");
    self.title_text = self.rc:GetObject(title_text_path):GetComponent("Text");
    self.msg_text.text=""
    self.title_text.text=""
    
    self.maskBtn = self.rc:GetObject("MaskBtn");
    
    self.resolve = self.rc:GetObject("Resolve")
    self.sand = self.rc:GetObject("StarSand")
    self.gold = self.rc:GetObject("Gold")
    self.sandTxt = self.rc:GetObject("SandTxt"):GetComponent("Text")
    self.goldTxt = self.rc:GetObject("GoldTxt"):GetComponent("Text")
    self.closeBut = self.rc:GetObject("CloseBtn")
    
    EventTriggerListener.Get(self.maskBtn).onLuaClick = self.ctrl.CloseSelf;
    UIUtil.AddBtnEvent(self.closeBut,function() self.ctrl.CloseSelf() end)
end

function this.OnLangCreate(self)
    LangUtil.BindText(self.msg_text)
    LangUtil.BindText(self.title_text)
end

function this.OnEnable(self)
    base.OnEnable(self);
    self:OnRefresh();
end

function this.OnRefresh(self)
    self.msg_text.text = self.model.data.message;
    self.title_text.text = self.model.data.title;
    coroutine.waitforframes(1)
    self.msg_text.gameObject:SetActive(false)
    coroutine.waitforframes(2)
    self.msg_text.gameObject:SetActive(true)
    self.sand:SetActive(false)
    self.gold:SetActive(false)
    
    if self.model.data.sandNum ~= nil and self.model.data.sandNum ~= 0 then
        self.sand:SetActive(true)
        self.sandTxt.text = self.model.data.sandNum
    end

    if self.model.data.goldNum ~= nil and self.model.data.goldNum ~= 0 then
        self.gold:SetActive(true)
        self.goldTxt.text = self.model.data.goldNum
    end

end

function this.OnAddListener(self)
    base.OnAddListener(self);
end

function this.OnRemoveListener(self)
    base.OnRemoveListener(self);
end


function this.OnDisable(self)
    base.OnDisable(self)
    if UIData.BlurFunc ~= nil then
        UIData.BlurFunc()
        UIData.BlurFunc = nil
    end
end

function this.OnDestroy(self)
    self.back_btn = nil;
    self.confirm_btn = nil;
    self.msg_text = nil;
    self.title_text = nil;
    base.OnDestroy(self);
end

return this

