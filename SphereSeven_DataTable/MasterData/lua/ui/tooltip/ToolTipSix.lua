---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/4/30 10:14
---

local ToolTipSix = BaseClass("ToolTipSix");
local this = ToolTipSix;
local endIndex = Vector2.New(0, 200);
local starIndex = Vector2.New(0, -100);
local time = 1.5;
local prefab;
local parent;
local isActive = true

function this.timeUpdate(self)
    if self.isBattleScene then
        if self.Finger ~= nil then
            if UIUtil.BattaleActiveWindow() then
                self.Finger:SetActive(false)
            else
                self.Finger:SetActive(true)
            end
        end
    end
end

local function MoveEndCallBack(self)
    isActive = true
    if not IsNull(self.gameObject) then
        ListChildPool:GetInstance():Remove(self.gameObject);
    end
    if self.timer ~= nil then
        self.timer:Stop()
        self.timer = nil
    end
end

local function MoveGameObject(self)
    DoTweenManager.DOAnchorPos3D(self.rectTransform,endIndex,time, MoveEndCallBack);
end


local function InitGameObject(self)
    self.rectTransform.localPosition = starIndex;
end

local function ActiveTip(self,pos,mode)
    
        ListChildPool:GetInstance():GetChild("ToolTipSix",parent,function(object)
            self.gameObject = object;
            self.Finger = self.gameObject.transform:Find("Finger").gameObject
            self.Finger:SetActive(false)
            self.rectTransform = self.gameObject:GetComponent("RectTransform");
            self.Ring1=self.gameObject.transform:Find("Effect/FunctionalGuidance/Ring1")
            if mode == nil then
                self.gameObject.transform.position=pos
            else
                self.rectTransform.anchoredPosition = pos
            end
            
            --local pos=Vector2.New(x ,y)
            --self.rectTransform.anchoredPosition=pos
            UIPublic.PlayEffect(self.Ring1)
            --self.text = self.transform:Find("Text"):GetComponent("Text");
            --self.text.text = message
            --coroutine.waitforframes(1)
            --InitGameObject(self);
            --MoveGameObject(self);
        end);
end

function this.__init(self,pos,mode)
    if parent == nil then
        parent = CS.UnityEngine.GameObject.Find("TopLayer").gameObject;
    end
    if isActive then
        coroutine.start(function()
            ActiveTip(self,pos,mode)
            isActive = false
            --coroutine.waitforseconds(1)
        end)
    end
    self.isBattleScene = Game.Scene:GetComponent("SceneComponent"):IsBattleScene()
    self.timer = TimerManager:GetInstance():GetTimer(0.01, self.timeUpdate, self)
    self.timer:Start()
end

ToolTipSix.MoveEndCallBack=MoveEndCallBack
return this;