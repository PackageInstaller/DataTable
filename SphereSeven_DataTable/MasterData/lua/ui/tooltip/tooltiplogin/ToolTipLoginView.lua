---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/4/12 17:40
---
local ToolTipLoginView = BaseClass("ToolTipLoginView",UIBaseView)
local base = UIBaseView
local this = ToolTipLoginView

function this.OnCreate(self)
    base.OnCreate(self)
    self.eventBg = self.rc:GetObject("EventBg")

    self.GuestLogin = self.rc:GetObject("GuestLogin")
    self.AppleLogin = self.rc:GetObject("AppleLogin")
    self.GoogleLogin = self.rc:GetObject("GoogleLogin")
    self.Exit = self.rc:GetObject("Exit")

    UIUtil.AddBtnEvent(self.eventBg,function()self.ctrl:CloseSelf()end,"Back")
    UIUtil.AddBtnEvent(self.Exit,function()self.ctrl:CloseSelf()end,"Back")

    UIUtil.AddBtnEvent(self.GuestLogin,function()
        CS.flyingSDK.GuestLogin()
    end)

    UIUtil.AddBtnEvent(self.AppleLogin,function()
        CS.flyingSDK.AppleLogin()
    end)

    UIUtil.AddBtnEvent(self.GoogleLogin,function()
        CS.flyingSDK.GoogleLogin()
    end)
    
end

function this.OnLangCreate(self)
end

function this.OnEnable(self)
    base.OnEnable(self)
    self:OnRefresh()
end

function this.OnRefresh(self)
    local SDKInterface = CS.flyingSDK

    -- 注册回调事件
    SDKInterface.OnLoginSuccess = function(userId)
        print("Login success: " .. userId)
    end

    SDKInterface.OnLoginFailed = function(errorCode, errorMessage)
        print("Login failed: " .. errorCode .. " - " .. errorMessage)
    end

    SDKInterface.OnRequestSuccess = function()
        print("Request success")
    end

    SDKInterface.OnRequestFailed = function(errorCode, errorMessage)
        print("Request failed: " .. errorCode .. " - " .. errorMessage)
    end

    SDKInterface.OnAccountDeletionSuccess = function()
        print("Account deletion success")
    end

    SDKInterface.OnAccountDeletionFailed = function(errorCode, errorMessage)
        print("Account deletion failed: " .. errorCode .. " - " .. errorMessage)
    end

    SDKInterface.OnLogout = function()
        print("Logout success")
    end

    SDKInterface.OnPurchaseSuccess = function(transactionId)
        print("Purchase success: " .. transactionId)
    end

    SDKInterface.OnPurchaseFailed = function(errorCode, errorMessage)
        print("Purchase failed: " .. errorCode .. " - " .. errorMessage)
    end
        -- 测试各个接口，触发回调
    -- 游客登录
    --SDKInterface.GuestLogin()
--
    ---- Google 登录
    --SDKInterface.GoogleLogin()
--
    ---- Apple 登录
    --SDKInterface.AppleLogin()
--
    ---- 游戏开始界面账号登录
    ----SDKInterface.AccountLogin()
--
    ---- 绑定 Google 账号
    --SDKInterface.GoogleBinding()
--
    ---- 绑定 Apple 账号
    --SDKInterface.AppleBinding()
--
    ---- 解除 Google 账号绑定
    --SDKInterface.GoogleUnBinding()
--
    ---- 解除 Apple 账号绑定
    --SDKInterface.AppleUnBinding()
--
    ---- 账号注销
    --SDKInterface.AccountDeletion()
--
    ---- 账号登出
    --SDKInterface.AccountLogout()
--
    ---- 内购
    --SDKInterface.PurchaseItem("product_id", "order_id", "notify_url", "extension_info", "account_id", "server_id", "role_id")

    ---- 获取 User ID
    --local userId = SDKInterface.GetUserId()
    --print("User ID: " .. userId)
--
    ---- 获取 User 账号类型
    --local accountType = SDKInterface.GetUserAccountType()
    --print("User Account Type: " .. accountType)
--
    ---- 获取账号绑定类型
    --local bindingTypes = SDKInterface.GetAccountBindingTypes()
    --print("Account Binding Types: " .. bindingTypes)
--
    ---- 同步角色信息
    --SDKInterface.CreateOrUpdateRoleSuccess("server_id", "server_name", "role_id", "role_name")

end

function this.OnAddListener(self)
    base.OnAddListener(self)
end

function this.OnRemoveListener(self)
    base.OnRemoveListener(self)
end

function this.OnDisable(self)
    base.OnDisable(self)
end

function this.OnDestroy(self)
    base.OnDestroy(self)
end

return this

