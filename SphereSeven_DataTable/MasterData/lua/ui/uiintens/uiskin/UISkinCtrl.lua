---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/4/17 21:27
---

local UISkinCtrl = BaseClass("UISkinCtrl",UIBaseCtrl);
local this = UISkinCtrl;

function this.CloseSelf()
    UIManager:GetInstance():CloseWindow(UIWindowNames.UISkin);
end

function this.SendChangeSkinRequest(self,data)
    coroutine.start(function()
        local g2cSkinModify = coroutine.yieldstart(Game.Scene.Session.CoCall, nil,  Game.Scene.Session,
                OuterOpcode.Name2Code.ETModel_C2M_SkinModify, data);
        if g2cSkinModify.Error == ErrorCode.ERR_Success then
            local card = Game.Scene.Player:GetComponent("CardComponent").Cards[data.CardId];
            card.SkinId = data.SkinId;
            DataManager:GetInstance():Broadcast(DataMessageNames.ON_SKIN_INFO_CHG);
        end
    end)
end

return this