---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/4/18 10:12
---

local UIEquipIntensModel = BaseClass("UIEquipIntensModel",UIBaseModel);
local base = UIBaseModel;
local this = UIEquipIntensModel;


function this.OnCreate(self)
    base.OnCreate(self);
end

function this.OnEnable(self,equipData)
    base.OnEnable(self);
    self:OnRefresh(equipData);
end

function this.OnRefresh(self,equipData)
    local player = Game.Scene.Player;
    self.equip_list = player:GetComponent("EquipComponent").Equips;
    self.card_list = player:GetComponent("CardComponent").Cards;
    if equipData ~= nil then
        self.panel_id = equipData.panel_id;
        self.Item_Id = equipData.Item_Id
        self.cur_equip = equipData.cur_equip --or table.first(self.equip_list);
        self.cur_card = equipData.cur_card or nil;
    else
        self.cur_equip = self.cur_equip --or table.first(self.equip_list);
        self.cur_card = self.cur_card or nil;
    end
end

local function OnEquipInfoChg(self)
    self:UIBroadcast(UIMessageNames.ON_EQUIP_INFO_CHG);
end

--local function ON_Guide_Click(self,cid,num,isrun,minStep)
--    self:UIBroadcast(UIMessageNames.ON_Guide_Click,cid,num,isrun,minStep)
--end

function this.OnAddListener(self)
    base.OnAddListener(self);
    self:AddDataListener(DataMessageNames.ON_EQUIP_INFO_CHG,OnEquipInfoChg);
    --self:AddDataListener(DataMessageNames.ON_Guide_Click,ON_Guide_Click)
end

function this.OnRemoveListener(self)
    base.OnRemoveListener(self);
    self:RemoveDataListener(DataMessageNames.ON_EQUIP_INFO_CHG);
    --self:RemoveDataListener(DataMessageNames.ON_Guide_Click)
end

function this.OnDisable(self)
    base.OnDisable(self);
end

function this.OnDestroy(self)
    base.OnDestroy(self);
end

return this