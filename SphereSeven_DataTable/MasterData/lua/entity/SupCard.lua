---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2019/6/13 19:08
---

local SupCard = BaseClass("SupCard",Entity)
local base = Entity

local function Awake(self,data)
    base.Awake(self)
    data.EquipList =data.EquipList or {}
    data.FightSoulList = data.FightSoulList or {}
    local cardInfo = data.Info;
    if cardInfo ~= nil then
        self.Id = cardInfo.CardId;
        self.TemplateId = cardInfo.TemplateId;
        self.Level = cardInfo.Level;
        self.LevelLimit = cardInfo.LevelLimit;
        self.Stage = cardInfo.Stage;
        self.Star = cardInfo.Star;
        self.Exp = cardInfo.Exp;
        self.CloseDegree = cardInfo.CloseDegree;
        self.SkinId = cardInfo.SkinId;
        self.Lock = cardInfo.Lock;

        self.Hand1Equip = cardInfo.Hand1Equip;
        self.Hand2Equip = cardInfo.Hand2Equip;
        self.BodyEquip = cardInfo.BodyEquip;
        self.HeadEquip = cardInfo.HeadEquip;
        self.FootEquip = cardInfo.FootEquip;
        self.AdornEquip = cardInfo.AdornEquip;
        self.FightSoul1 = cardInfo.FightSoul1;
        self.FightSoul2 = cardInfo.FightSoul2;
        self.FightSoul3 = cardInfo.FightSoul3;
        self.Support = cardInfo.Support;
        self.JadePearlLevel = cardInfo.JadePearlLevel
        self.IsSupport = true;
        self.IsSection = cardInfo.IsSection;
        self.Name = data.Name
        self.OwnId = data.OwnId
        self.IsUse = false
        local constelLevel = cardInfo.ConstelLevel and cardInfo.ConstelLevel or 0
        self.ConstelLevel = Game.Registry:NewObject("CheatData", constelLevel)
    else
        self.ConstelLevel = Game.Registry:NewObject("CheatData", 0)
    end
    self.Equips = {};
    self.FightSouls= {};
    for k, v in pairs(data.EquipList) do
        local equip = Game.Registry:NewObject("Equip",v);
        equip:AddComponent("EquipAttrComponent");
        self.Equips[v.EquipId] = equip;
    end
    -- for k, v in pairs(data.FightSoulList) do
    --     self.FightSouls[v.FightSoulId] = Game.Registry:NewObject("FightSoul",v);
    -- end
    
end
--[[
local function LevelTemplateId(self)
    return self.TemplateId..string.format("%03d",self.Level)
end
--]]

local function InitCardComponent(self)
    self:AddComponent("NumericComponent")
    self:AddComponent("CardCharacterComponent")
    self:AddComponent("CardEquipComponent")
    self:AddComponent("CardFightSoulComponent")
    self:AddComponent("CardJadePearlComponent")
    self:AddComponent("CardConstelComponent")
end

local function GetAttri(self, type)
    if type == 50 then
        return self.ConstelLevel:Get()
    end

    return 0
end

local function SetAttri(self, type, val)
    if type == 50 then
        return self.ConstelLevel:Set(val)
    end

    return 0
end
local function Dispose(self)
    base.Dispose(self)
end

SupCard.Awake = Awake
SupCard.Dispose = Dispose
SupCard.InitCardComponent = InitCardComponent
SupCard.GetAttri = GetAttri
SupCard.SetAttri = SetAttri

return SupCard