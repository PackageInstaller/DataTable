-- chunkname: @IQIGame\\UIExternalApi\\UIGlobalApi.lua

UIGlobalApi = {
	UIFxRootPath = "Assets/03_Prefabs/ART_Prefabs/Effect",
	OriginImagePath = "Assets/99_Origin/05_Images",
	UINpcPortraitPath = "Assets/03_Prefabs/ART_Prefabs/UI/NpcPortrait",
	UIPath = "Assets/03_Prefabs/UI",
	Live2DResRootPath = "Assets/20_Live2D/Live2D_Resources",
	IconPath = "Assets/05_Images/Icon",
	ImagePath = "Assets/05_Images",
	HomeLandRootPath = "Assets/03_Prefabs/ART_Prefabs/Element",
	MediaPath = "Assets/21_Media",
	UIModelPath = "Assets/03_Prefabs/ART_Prefabs/UI/UIModel",
	GUIPath = "Assets/05_Images/GUI",
	CharactersPath = "Assets/03_Prefabs/ART_Prefabs/Characters",
	AnimationPath = "Assets/07_Animations",
	DailyDupExploreHallBGPath = "Assets/03_Prefabs/UI/_ExploreHall/",
	OriginPrefabPath = "Assets/99_Origin/03_Prefabs",
	UICompressPath = "Assets/05_Images/GUI/NewCommon/Compress",
	ArtPrefabRootPath = "Assets/03_Prefabs/ART_Prefabs",
	ElementSpinePath = "Assets/03_Prefabs/ART_Prefabs/Element",
	PrefabsRootPath = "Assets/03_Prefabs",
	RoundMap = {
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true
	},
	CutMap = {
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false
	},
	DigitMap = {
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		4,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		0,
		0,
		3,
		3,
		3,
		3,
		3,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3,
		3
	},
	PercentMap = {
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		false,
		false,
		false,
		false,
		true,
		true,
		true,
		true,
		true,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		false,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true,
		true
	},
	PuppetShowAttributesTwo = {
		7,
		8,
		11,
		12,
		9,
		10
	},
	PuppetShowAttributesThree = {
		21,
		22,
		23,
		24,
		25,
		26,
		27,
		28,
		34,
		35
	},
	AttrNotShowInNotice = {
		[19] = 19,
		[15] = 15,
		[16] = 16,
		[17] = 17,
		[18] = 18,
		[20] = 20
	},
	QualityColorStr = {
		"#D8D8D8",
		"#57B66D",
		"#308CAE",
		"#9A59B6",
		"#FE9E38"
	},
	QualityColor = {
		14211288,
		5748333,
		3181742,
		10115510,
		16686648
	}
}

function UIGlobalApi.GetItemCellAssetPath()
	return AssetPath.Get(GlobalKey.UIPrefabPath, "Common/CommonSlotUI")
end

function UIGlobalApi.GetLittleItemCellAssetPath()
	return AssetPath.Get(GlobalKey.UIPrefabPath, "Common/LittleCommonSlotUI")
end

function UIGlobalApi.GetSoulCellAssetPath()
	return AssetPath.Get(GlobalKey.UIPrefabPath, "Common/CommonSoulUI")
end

function UIGlobalApi.GetSoulHeadAssetPath()
	return AssetPath.Get(GlobalKey.UIPrefabPath, "Common/CommonSoulHeadUI")
end

function UIGlobalApi.GetSoulListCellAssetPah()
	return AssetPath.Get(GlobalKey.UIPrefabPath, "_SoulListUI/Card_Mould")
end

function UIGlobalApi.GetSoulHeadQualityPath(woreSpecialEquip)
	return MiscApi:GetString("GlobalGetSoulHeadQualityPath", woreSpecialEquip)
end

function UIGlobalApi.GetSkillGridAssetPath()
	return AssetPath.Get(GlobalKey.UIPrefabPath, "Common/CommonSkillUI")
end

function UIGlobalApi.GetEquipMouldPrefab()
	return AssetPath.Get(GlobalKey.UIPrefabPath, "Common/CommonEquipMouldUI_Small")
end

function UIGlobalApi.GetMonsterHeadCellAssetPath()
	return AssetPath.Get(GlobalKey.UIPrefabPath, "Common/CommonMonsterHeadCell")
end

function UIGlobalApi.GetMoneyCellAssetPath()
	return AssetPath.Get(GlobalKey.UIPrefabPath, "Common/MoneyGrid_Mould")
end

function UIGlobalApi.GetUIFxEffectPath(effectName)
	return UIGlobalApi.UIFxRootPath .. "/" .. effectName .. ".prefab"
end

function UIGlobalApi.GetUIFxEffectPathByCfg(effectID)
	local effName = CfgEffectEntityTable[CfgEffectTable[effectID].EntityID].PrefabName

	return UIGlobalApi.GetUIFxEffectPath(effName)
end

function UIGlobalApi.GetFxEffectPathByEntityId(effectEntityId)
	return UIGlobalApi.UIFxRootPath .. "/" .. CfgEffectEntityTable[effectEntityId].PrefabName .. ".prefab"
end

function UIGlobalApi.GetIconPath(iconStr)
	return UIGlobalApi.IconPath .. iconStr
end

function UIGlobalApi.GetImagePath(fileName)
	return UIGlobalApi.ImagePath .. fileName
end

function UIGlobalApi.IsOriginalPathExists(path)
	return CfgSoulOriginalResTable.PathDict[path] == 1
end

function UIGlobalApi.GetHarmoniousImagePath(fileName)
	if SettingModule.harmoniousResources == 1 then
		local originalPath = UIGlobalApi.OriginImagePath .. fileName

		if UIGlobalApi.IsOriginalPathExists(originalPath) then
			return originalPath
		end
	end

	return UIGlobalApi.GetImagePath(fileName)
end

function UIGlobalApi.GetHarmoniousPrefabRoot(fileName)
	if SettingModule.harmoniousResources == 1 then
		local originalPath = UIGlobalApi.OriginPrefabPath .. fileName

		if UIGlobalApi.IsOriginalPathExists(originalPath) then
			return originalPath
		end
	end

	return UIGlobalApi.GetPrefabRoot(fileName)
end

function UIGlobalApi.GetAssetPath(fileName)
	return "Assets" .. fileName
end

function UIGlobalApi.GetSkillQualityBottomPath(quality)
	return MiscApi:GetString("GlobalGetSkillQualityBottomPath", quality)
end

function UIGlobalApi.GetUI3DPath(fileName)
	return UIGlobalApi.UIPath .. "/UI3D/" .. fileName .. ".prefab"
end

function UIGlobalApi.GetUIModelPath(fileName)
	return UIGlobalApi.UIModelPath .. "/" .. fileName .. ".prefab"
end

function UIGlobalApi.GetNpcPortraitPath(fileName)
	return UIGlobalApi.UINpcPortraitPath .. "/" .. fileName .. ".prefab"
end

function UIGlobalApi.GetUIDatingPath(fileName)
	return UIGlobalApi.ImagePath .. "/Dating" .. fileName
end

function UIGlobalApi.GetArtPath(fileName)
	return UIGlobalApi.ArtPrefabRootPath .. fileName
end

function UIGlobalApi.GetCommonUIPrefabPath(fileName)
	return AssetPath.Get(GlobalKey.UIPrefabPath, "Common/" .. fileName)
end

function UIGlobalApi.GetBattleUIPrefab(fileName)
	return UIGlobalApi.ArtPrefabRootPath .. "/UI/Battle/Character/" .. fileName .. ".prefab"
end

function UIGlobalApi.GetUIPrefab(prefabName)
	if SettingModule.harmoniousResources == 1 then
		local originalPath = UIGlobalApi.OriginPrefabPath .. "/UI" .. prefabName .. ".prefab"

		if UIGlobalApi.IsOriginalPathExists(originalPath) then
			return originalPath
		end
	end

	return UIGlobalApi.UIPath .. prefabName .. ".prefab"
end

function UIGlobalApi.GetDailyDupExploreHallBGPrefab(prefabName)
	return UIGlobalApi.DailyDupExploreHallBGPath .. prefabName .. ".prefab"
end

function UIGlobalApi.GetPrefabRoot(prefabName)
	return UIGlobalApi.PrefabsRootPath .. prefabName
end

function UIGlobalApi.GetHomeLandDecoratePrefab(prefabName)
	return UIGlobalApi.HomeLandRootPath .. "/" .. prefabName .. ".prefab"
end

function UIGlobalApi.GetLotteryAnimPaths()
	return UIGlobalApi.GetUIModelPath("UI_Lottery")
end

function UIGlobalApi.IsAttrNotShowInNotice(attrID)
	return UIGlobalApi.AttrNotShowInNotice[attrID] ~= nil
end

function UIGlobalApi.GetElementPrefab(fileName)
	return UIGlobalApi.ElementSpinePath .. "/" .. fileName .. ".prefab"
end

function UIGlobalApi.GetColorStrByQuality(quality)
	return UIGlobalApi.QualityColorStr[quality]
end

function UIGlobalApi.GetColorByQuality(quality)
	return UIGlobalApi.QualityColor[quality]
end

function UIGlobalApi.GetNoticePrefab(fileName)
	return UIGlobalApi.UIPath .. "/_NoticeUI" .. fileName
end

function UIGlobalApi.GetMediaPath(fileName)
	return UIGlobalApi.MediaPath .. "/" .. fileName
end

function UIGlobalApi.GetRuneSlotUIPath()
	return AssetPath.Get(GlobalKey.UIPrefabPath, "Common/RuneSlotUI")
end

function UIGlobalApi.GetRuneItemSlotUIPath()
	return AssetPath.Get(GlobalKey.UIPrefabPath, "Common/RuneLockSlotUI")
end

function UIGlobalApi.GetSoulPortraitPath(soulCid, soulResCid)
	return UIGlobalApi.GetUIPrefab("/SoulPrefab/SoulRes_" .. soulCid .. "_" .. soulResCid)
end

function UIGlobalApi.GetAnimationPath(fileName)
	return UIGlobalApi.AnimationPath .. fileName
end

function UIGlobalApi.GetTextWithoutKeywordTag(sourceTxt)
	local replace1 = string.gsub(" <b><i>", " ", " ")
	local replace2 = string.gsub("</i></b> ", " ", " ")
	local ret = string.gsub(sourceTxt, "<keyword=%d+>", replace1)
	local result, mathNum = string.gsub(ret, "</keyword>", replace2)

	result = string.gsub(result, replace1 .. replace2, "")

	return result
end

function UIGlobalApi.CheckExistKeywordTag(sourceTxt)
	if sourceTxt == nil then
		return false
	end

	for findRet in string.gmatch(sourceTxt, Constant.KeywordTag) do
		if findRet ~= nil then
			return true
		end
	end

	return false
end
